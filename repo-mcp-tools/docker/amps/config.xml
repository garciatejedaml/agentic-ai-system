<?xml version="1.0" encoding="UTF-8"?>
<!--
  AMPS Server configuration for local POC development.

  Ports:
    8085 → HTTP admin interface (exposes /amps.json, /topics.json, /clients.json)
    9007 → TCP transport for JSON messages (AMPS Python client connects here)

  SOW Topics:
    positions → stores latest position per instrument (keyed by /id)
    orders    → stores latest order state (keyed by /order_id)
-->
<AMPSConfig>
  <Name>amps-poc</Name>

  <!-- HTTP admin: exposes amps.json, topics.json, clients.json, stats.json -->
  <Admin>
    <InetAddr>0.0.0.0:8085</InetAddr>
  </Admin>

  <!-- TCP transport for JSON messages -->
  <Transports>
    <Transport>
      <Name>tcp-json</Name>
      <Type>tcp</Type>
      <InetAddr>0.0.0.0:9007</InetAddr>
      <MessageType>json</MessageType>
    </Transport>
  </Transports>

  <!-- State-of-World (SOW) topics: persist latest state per key -->
  <SOW>
    <Topic>
      <Name>positions</Name>
      <MessageType>json</MessageType>
      <Key>/id</Key>
      <FileName>sow/positions.sow</FileName>
    </Topic>

    <Topic>
      <Name>orders</Name>
      <MessageType>json</MessageType>
      <Key>/order_id</Key>
      <FileName>sow/orders.sow</FileName>
    </Topic>

    <Topic>
      <Name>market-data</Name>
      <MessageType>json</MessageType>
      <Key>/symbol</Key>
      <FileName>sow/market-data.sow</FileName>
    </Topic>
  </SOW>

</AMPSConfig>
